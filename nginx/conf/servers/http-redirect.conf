# HTTP to HTTPS 重定向伺服器
# 將所有 HTTP 流量重定向到 HTTPS，並處理 Let's Encrypt 認證

server {
    listen 80;
    server_name novis.tplinkdns.com;

    # Let's Encrypt ACME Challenge 路徑
    # 允許 Certbot 在不中斷服務的情況下更新證書
    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    # 將所有其他 HTTP 請求重定向到 HTTPS
    location / {
        return 301 https://$host$request_uri;
    }
}
