# n8n 工作流程自動化服務配置
# 支援 WebSocket 連線

location /n8n/ {
    proxy_pass http://n8n:5678/;
    proxy_http_version 1.1;  # 支援 WebSocket
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";  # 注意使用直引號，不是彎引號
    
    # 引入標準代理頭部設定
    include /etc/nginx/conf.d/templates/proxy-headers.conf;
    
    # WebSocket 特殊配置
    proxy_buffering off;
    proxy_cache off;
    chunked_transfer_encoding off;
}
